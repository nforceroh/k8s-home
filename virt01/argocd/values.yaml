# https://github.com/argoproj/argo-helm/blob/master/charts/argo-cd/values.yaml
# domain names are overridden due to derivation from Values.global.domain

argo-cd:
  dex:
    enabled: false

  crds:
    install: true

  global:
    domain: argo.k3s.nf.lab

  configs:
    params:
      server.insecure: true
    cm:
      exec.enabled: true
      kustomize.buildOptions: --enable-helm
  #    url: 'https://argo.k3s.nf.lab'
      admin.enabled: true
    secret:
      argocdServerAdminPassword: "$2a$10$BU1MWZ7KKPmkc3aPpmtK/enV5xHq4uMhr6SoE1VEc.pMbkNwIYDB6"
      argocdServerAdminPasswordMtime: "2020-09-01T10:11:12Z"

  server:
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        cert-manager.io/cluster-issuer: nf-lab
        cert-manager.io/private-key-rotation-policy: Always
        external-dns.alpha.kubernetes.io/target: traefik.k3s.nf.lab
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/service.serversscheme: http # Add this line
      tls: true
      # extraTls:
      #   - hosts:
      #       - argo.k3s.nf.lab
      #     secretName: argocd-server-tls

  controller:
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
        namespace: monitoring
        interval: 30s
    rules:
      enabled: true
      namespace: monitoring