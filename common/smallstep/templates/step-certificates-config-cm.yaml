apiVersion: v1
data:
  ca.json: |
    {
        "root": "/home/step/certs/root_ca.crt",
        "federatedRoots": null,
        "crt": "/home/step/certs/intermediate_ca.crt",
        "key": "/home/step/secrets/intermediate_ca_key",
        "address": ":9000",
        "insecureAddress": "",
        "dnsNames": [
                "ca.nf.lab"
        ],
        "logger": {
                "format": "text"
        },
        "db": {
                "type": "badgerv2",
                "dataSource": "/home/step/db",
                "badgerFileLoadingMode": ""
        },
        "authority": {
                "provisioners": [
                        {
                                "type": "JWK",
                                "name": "sylvain@nf.lab",
                                "key": {
                                        "use": "sig",
                                        "kty": "EC",
                                        "kid": "gniFN4D1hZIy1ZZKqrtQcXwMPFbmZRGRyYAOx2Q7Sdk",
                                        "crv": "P-256",
                                        "alg": "ES256",
                                        "x": "tPPkRwfkjRwGQCi_BVyXnbAL6XB4WYgJuU1pvMdfmAQ",
                                        "y": "i2r_Qw0krEe-vqEGv-rO7xA_6f7wj_i6eD75CUyNxoI"
                                },
                                "claims": {
                                        "maxTLSCertDuration": "87660h"
                                },
                                "encryptedKey": "eyJhbGciOiJQQkVTMi1IUzI1NitBMTI4S1ciLCJjdHkiOiJqd2sranNvbiIsImVuYyI6IkEyNTZHQ00iLCJwMmMiOjEwMDAwMCwicDJzIjoiY1l6cnVSZ1NrcUk5T2c0STZ6OFBRUSJ9.9I9j0DMZDKLnRU-wVjqJabifuXms43e2Fad2n5KDZORcg1gjq1DOAA.pfByOGpEKAo07YiW.g-ByfhM6bbRQGp9quBmju09eE4ZdKwXOu4-78rSKxo-YYk4bfXVytumh3tawd9oPJgZLWTP57QVO50GgkcpM6MADdXO0QN5-92fBRQJvAN7sUIvdTSK1OHMQePWsKvu5AUiNmdxu46PvknNnG0xMPDjjM5D93InJM8USZ0orMk93H0AaF9b3ofUbhusfHhfIPJ0xTzRQTUURiMjQn7ehDIadxsMwsAwDn44LfC1qa-KpvNL91cXx-ZqgNak9FxeIPpMwM9IBHasqiqR0lQVGqNqLcEaWaLIRTVKCv_pPq6ermhlk262PNI8S0rP-F7LeikLUkbVWX130bliuGQ8.kRAIrqZIVW588i02NfaaOA"
                        },
                        {
                                "type": "ACME",
                                "name": "acme",
                                "claims": {
                                        "enableSSHCA": true,
                                        "disableRenewal": false,
                                        "allowRenewalAfterExpiry": false,
                                        "maxTLSCertDuration": "87660h",
                                        "defaultTLSCertDuration": "2160h"
                                },
                                "options": {
                                        "x509": {},
                                        "ssh": {}
                                }
                        }
                ],
                "template": {},
                "backdate": "1m0s"
        },
        "tls": {
                "cipherSuites": [
                        "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
                        "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256"
                ],
                "minVersion": 1.2,
                "maxVersion": 1.3,
                "renegotiation": false
        },
        "commonName": "Step Online CA"
    }
  defaults.json: |
    {
        "ca-url": "https://ca.nf.lab:9000",
        "ca-config": "/home/step/config/ca.json",
        "fingerprint": "50469643a11b4e72f2dd2eddae5c90d8b90acf1c51b2ab8ccba9391b5b97d9bc",
        "root": "/home/step/certs/root_ca.crt"
    }
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: step-certificates-config
  namespace: {{ .Release.Namespace }}
  annotations:
    argocd.argoproj.io/sync-wave: "-1"